# 文件受控机制的设计

[TOC]



## 涉及角色

- 实验人员/采样人员等 e
- 文档批准者 a

## 要求

a发布得到批准的文件file1，发布到X系统中：

1. file1和其它所有的file有统一的电子档案管理

2. 能在手机，平板，电脑等在线方式查看，也能离线打印查看

3. 确保所有人员，无论在线还是离线，查看文件的时候，文件是最新的版本。这里要设计一个[check机制](#check机制)。


## 场景

##### 在线填写+离线OP

成功: e拿出手机，扫描OP上的二维码，X通过，进入填写界面。

失败: X告知，该OP已经失效，请打印新的OP，并销毁旧版。并询问是否采用[在线填写+在线OP的场景](#在线填写+在线OP)

##### 在线填写+在线OP

e拿出手机，选择进行的项目，进入填写界面，界面上有该OP的链接地址。

##### 离线填写+离线OP

1. e拿出表格，先填入离线OP上的文件hash值，再填入其它信息。
2. 之后输入数据库时，需要手动填入正确的hash值，数据库才可以显示填写界面。

##### 离线填写+在线OP

同上。（这种情况不太可能，既然可以用在线OP，干嘛用离线填写。）



##### check机制

在所有的文件开头，有一个**二维码**，在做任何依据这些文件开展的工作的时候，都需要扫描，得到数据库的确认，才可以进行接下来的工作，比如：填写采样信息，填写实验原始记录。在特殊情况下，如果无法使用电子系统直接记录信息，可以拿打印好的纸质记录先填写（X系统中提供打印布局。）



